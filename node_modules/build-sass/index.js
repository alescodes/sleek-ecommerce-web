#!/usr/bin/env node
const path = require("path");
const rootPath = path.resolve(process.cwd());
const sassConfig = require(path.resolve(rootPath, './build.sass.config.js'));
const buildSass = require("./build-sass.js");
if (sassConfig.watchModel) {
  let shellStr = "";
  sassConfig.watch.forEach((val, index) => {
    shellStr += `${val.scss}:${val.css} `
  })
  shellStr = 'sass ' + shellStr + ' --watch';
  const process = require('child_process');
  console.log('Sass is watching for changes. Press Ctrl-C to stop.')
  process.exec(shellStr,function (error, stdout, stderr) {
    if (error !== null) {
      console.log('exec error: ' + error);
      process.exit();
    }
  });
} else {
  buildSass(sassConfig.build);
}
